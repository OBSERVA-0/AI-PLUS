<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' http://localhost:3000 https://ai-plus-education.onrender.com; script-src 'self' 'unsafe-inline'; style-src 'self' https://fonts.googleapis.com 'unsafe-inline'; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:;">
    <title>Practice Tests - AI Plus Education</title>
    <link rel="stylesheet" href="dashboard-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Additional overscroll prevention */
        html, body {
            overscroll-behavior: none !important;
            overscroll-behavior-y: none !important;
            overscroll-behavior-x: none !important;
            touch-action: pan-y;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Prevent pull-to-refresh */
        body {
            position: relative;
            overflow-x: hidden;
        }
        
        @media (max-width: 768px) {
            html {
                position: fixed;
                height: 100%;
                width: 100%;
                overflow: hidden;
            }
            
            body {
                position: fixed;
                height: 100%;
                width: 100%;
                overflow-y: auto;
                overflow-x: hidden;
                -webkit-overflow-scrolling: touch;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <h1>AI Plus Education</h1>
                <a href="admin.html" class="admin-toggle" style="display: none;">Admin</a>
            </div>
            <nav class="nav">
                <div class="nav-links">
                    <a href="dashboard.html" class="nav-link active">Dashboard</a>
                    <a href="profile.html" class="nav-link">Profile</a>
                    <a href="test-history.html" class="nav-link">Test History</a>
                </div>
                <div class="user-info">
                    <span class="welcome-text">Welcome, <span id="user-name">Student</span></span>
                    <button id="logout-btn" class="btn btn-outline">Logout</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Test Selection View -->
            <section id="test-selection" class="test-selection">
                <div class="section-header">
                    <h1>Choose Your Practice Test</h1>
                    <p>Select a test to begin your practice session</p>
                </div>

                <div class="user-stats">
                    <div class="stat-card">
                        <h3>Tests Completed</h3>
                        <span class="stat-number" id="total-tests">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Average Score</h3>
                        <span class="stat-number" id="avg-score">0%</span>
                    </div>
                </div>



                <div class="tests-grid">
                    <div class="test-card" data-test="shsat">
                        <div class="test-icon">📚</div>
                        <h2>SHSAT</h2>
                        <p>Specialized High School Admissions Test</p>
                        <div class="test-details">
                            <div class="detail-item">
                                <span class="label">Sections:</span>
                                <span class="value">ELA & Math</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Questions:</span>
                                <span class="value">114 total</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Time:</span>
                                <span class="value">180 minutes</span>
                            </div>
                        </div>
                        
                        <!-- Test Type Selection -->
                        <div class="test-selection-controls">
                            <div class="selection-row">
                                <div class="dropdown-group">
                                    <label for="shsat-test-type-select">Test Type:</label>
                                    <select id="shsat-test-type-select" class="test-type-selector">
                                        <option value="full" selected>Full Test (ELA + Math)</option>
                                        <option value="ela">ELA Only</option>
                                        <option value="math">Math Only</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="test-progress">
                            <div class="progress-info">
                                <span>Tests taken: <span class="test-count">0</span></span>
                                <span>Best score: <span class="best-score">N/A</span></span>
                            </div>
                        </div>
                        
                        <!-- Dynamic Test Display Area -->
                        <div class="test-display-area">
                            <!-- Coming Soon message for sections with no available tests -->
                            <div id="shsat-coming-soon-message" class="selection-message" style="display: none;">
                                <div class="message-content">
                                    <h4>🚧 Coming Soon</h4>
                                    <p>No section-specific tests are available for this selection yet. Please try a different option or select "Full Test".</p>
                                </div>
                            </div>
                            
                            <!-- Test buttons container -->
                            <div id="shsat-test-buttons-container" class="test-buttons">
                                <button class="btn btn-primary start-test-btn" data-practice-set="1" data-test-type="full">Practice 1 (Full)</button>
                                <button class="btn btn-secondary start-test-btn" data-practice-set="2" data-test-type="full">Practice 2 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="3" data-test-type="full">Practice 3 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="4" data-test-type="full">Practice 4 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="5" data-test-type="full">Practice 5 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="6" data-test-type="full">Practice 6 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="7" data-test-type="full">Practice 7 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="8" data-test-type="full">Practice 8 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="9" data-test-type="full">Practice 9 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="10" data-test-type="full">Practice 10 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="11" data-test-type="full">Practice 11 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="12" data-test-type="full">Practice 12 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="13" data-test-type="full">Practice 13 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="14" data-test-type="full">Practice 14 (Full)</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="15" data-test-type="full">Practice 15 (Full)</button>
                                <button class="btn btn-diagnostic start-test-btn" data-practice-set="diagnostic" data-test-type="full">Diagnostic Test (Full)</button>
                                
                            </div>
                        </div>
                    </div>

                    <div class="test-card" data-test="sat">
                        <div class="test-icon">🎯</div>
                        <h2>SAT</h2>
                        <p>College Admissions Test Practice</p>
                        <div class="test-details">
                            <div class="detail-item">
                                <span class="label">Sections:</span>
                                <span class="value">Reading & Writing</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Questions:</span>
                                <span class="value">~54 questions</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Time:</span>
                                <span class="value">~64 minutes</span>
                            </div>
                        </div>
                        <div class="test-progress">
                            <div class="progress-info">
                                <span>Tests taken: <span class="test-count">0</span></span>
                                <span>Best score: <span class="best-score">N/A</span></span>
                            </div>
                        </div>
                        <div class="test-buttons">
                            <button class="btn btn-primary start-test-btn" data-practice-set="1">Start Practice 1</button>
                            <button class="btn btn-secondary start-test-btn" data-practice-set="2">Start Practice 2</button>
                        </div>
                    </div>

                    <div class="test-card" data-test="statetest">
                        <div class="test-icon">🏛️</div>
                        <h2>State Tests</h2>
                        <p>State Standardized Assessments</p>
                        <div class="test-details">
                            <div class="detail-item">
                                <span class="label">Sections:</span>
                                <span class="value">ELA & Math</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Questions:</span>
                                <span class="value">5-61 per test</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Time:</span>
                                <span class="value">90-180 minutes</span>
                            </div>
                        </div>
                        
                        <!-- Grade and Subject Selection -->
                        <div class="test-selection-controls">
                            <div class="selection-row">
                                <div class="dropdown-group">
                                    <label for="grade-select">Grade:</label>
                                    <select id="grade-select" class="grade-selector">
                                        <option value="">Select Grade</option>
                                        <option value="3">Grade 3</option>
                                        <option value="4">Grade 4</option>
                                        <option value="5">Grade 5</option>
                                        <option value="6">Grade 6</option>
                                        <option value="7" selected>Grade 7</option>
                                        <option value="8">Grade 8</option>
                                    </select>
                                </div>
                                <div class="dropdown-group">
                                    <label for="subject-select">Subject:</label>
                                    <select id="subject-select" class="subject-selector">
                                        <option value="">Select Subject</option>
                                        <option value="ela">English Language Arts</option>
                                        <option value="math">Mathematics</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="test-progress">
                            <div class="progress-info">
                                <span>Tests taken: <span class="test-count">0</span></span>
                                <span>Best score: <span class="best-score">N/A</span></span>
                            </div>
                        </div>
                        
                        <!-- Dynamic Test Display Area -->
                        <div class="test-display-area">
                            <!-- Default message when no selection made -->
                            <div id="no-selection-message" class="selection-message">
                                <div class="message-content">
                                    <h4>🎯 Select Grade and Subject</h4>
                                    <p>Choose your grade level and subject from the dropdowns above to see available tests.</p>
                                </div>
                            </div>
                            
                            <!-- No tests available message -->
                            <div id="no-tests-message" class="selection-message" style="display: none;">
                                <div class="message-content">
                                    <h4>🚧 Coming Soon</h4>
                                    <p>Tests for this grade and subject combination are not available yet. Check back soon!</p>
                                </div>
                            </div>
                            
                            <!-- Test buttons container -->
                            <div id="test-buttons-container" class="test-buttons" style="display: none;">
                                <!-- Grade 7 ELA Tests -->
                                <button class="btn btn-primary start-test-btn" data-practice-set="1" data-grade="7" data-subject="ela">Grade 7 ELA Test-1</button>
                                <button class="btn btn-secondary start-test-btn" data-practice-set="2" data-grade="7" data-subject="ela">Grade 7 ELA Test-2</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="3" data-grade="7" data-subject="ela">Grade 7 ELA Test-3</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="7" data-grade="7" data-subject="ela">Grade 7 ELA Test-4</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="8" data-grade="7" data-subject="ela">Grade 7 ELA Test-5</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="9" data-grade="7" data-subject="ela">Grade 7 ELA Test-6</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="10" data-grade="7" data-subject="ela">Grade 7 ELA Test-7</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="11" data-grade="7" data-subject="ela">Grade 7 ELA Test-8</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="12" data-grade="7" data-subject="ela">Grade 7 ELA Test-9</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="13" data-grade="7" data-subject="ela">Grade 7 ELA Test-10</button>
                                
                                <!-- Grade 7 Math Tests -->
                                <button class="btn btn-primary start-test-btn" data-practice-set="4" data-grade="7" data-subject="math">Grade 7 Math Test-1</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="5" data-grade="7" data-subject="math">Grade 7 Math Test-2</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="6" data-grade="7" data-subject="math">Grade 7 Math Test-3</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="14" data-grade="7" data-subject="math">Grade 7 Math Test-4</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="15" data-grade="7" data-subject="math">Grade 7 Math Test-5</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="16" data-grade="7" data-subject="math">Grade 7 Math Test-6</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="17" data-grade="7" data-subject="math">Grade 7 Math Test-7</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="18" data-grade="7" data-subject="math">Grade 7 Math Test-8</button>
                                
                                <!-- Grade 6 ELA Tests -->
                                <button class="btn btn-primary start-test-btn" data-practice-set="10" data-grade="6" data-subject="ela">Grade 6 ELA Test-1</button>
                                <button class="btn btn-secondary start-test-btn" data-practice-set="11" data-grade="6" data-subject="ela">Grade 6 ELA Test-2</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="12" data-grade="6" data-subject="ela">Grade 6 ELA Test-3</button>
                                <button class="btn btn-secondary start-test-btn" data-practice-set="13" data-grade="6" data-subject="ela">Grade 6 ELA Test-4</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="14" data-grade="6" data-subject="ela">Grade 6 ELA Test-5</button>
                                <button class="btn btn-secondary start-test-btn" data-practice-set="15" data-grade="6" data-subject="ela">Grade 6 ELA Test-6</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="16" data-grade="6" data-subject="ela">Grade 6 ELA Test-7</button>
                                <button class="btn btn-secondary start-test-btn" data-practice-set="17" data-grade="6" data-subject="ela">Grade 6 ELA Test-8</button>
                                
                                <!-- Grade 6 Math Tests -->
                                <button class="btn btn-primary start-test-btn" data-practice-set="1" data-grade="6" data-subject="math">Grade 6 Math Test-1</button>
                                <button class="btn btn-secondary start-test-btn" data-practice-set="2" data-grade="6" data-subject="math">Grade 6 Math Test-2</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="3" data-grade="6" data-subject="math">Grade 6 Math Test-3</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="4" data-grade="6" data-subject="math">Grade 6 Math Test-4</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="5" data-grade="6" data-subject="math">Grade 6 Math Test-5</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="6" data-grade="6" data-subject="math">Grade 6 Math Test-6</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="7" data-grade="6" data-subject="math">Grade 6 Math Test-7</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="8" data-grade="6" data-subject="math">Grade 6 Math Test-8</button>
                                <button class="btn btn-primary start-test-btn" data-practice-set="9" data-grade="6" data-subject="math">Grade 6 Math Test-9</button>
                                
                                <!-- Add more grades/subjects here - just add buttons with data-grade and data-subject attributes! -->
                                <!-- Example for Grade 8 Math (when you add those tests):
                                <button class="btn btn-primary start-test-btn" data-practice-set="18" data-grade="8" data-subject="math">Grade 8 Math Test-1</button>
                                -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Practice Test View -->
            <section id="practice-test" class="practice-test" style="display: none;">
                <div class="test-header">
                    <div class="test-info">
                        <h1 id="current-test-title">SHSAT Practice Test</h1>
                        <div class="test-meta">
                            <span class="question-counter">Question <span id="current-question">1</span> of <span id="total-questions">0</span></span>
                            <span class="current-section">Section: <span id="current-section">English Language Arts</span></span>
                        </div>
                    </div>
                    <div class="test-controls">
                        <div class="timer">
                            <span class="timer-label">Time Remaining:</span>
                            <span class="timer-display" id="timer">60:00</span>
                        </div>
                        <button id="end-test-btn" class="btn btn-outline">End Test</button>
                    </div>
                </div>

                <div class="test-navigation">
                    <div class="nav-buttons">
                        <button id="prev-question" class="btn btn-outline" disabled>Previous</button>
                        <div class="question-grid">
                            <!-- Question numbers will be generated here -->
                        </div>
                        <button id="next-question" class="btn btn-primary">Next</button>
                    </div>
                    <!-- Test summary will be added here dynamically -->
                </div>

                <div class="question-container">
                    <div class="question-content">
                        <div class="question-text" id="question-text">
                            <!-- Question will be loaded here -->
                        </div>
                        <div class="question-options" id="question-options">
                            <!-- Answer options will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Test Results View -->
            <section id="test-results" class="test-results" style="display: none;">
                <div class="results-header">
                    <h1>Test Complete!</h1>
                    <p>Here are your results for this practice session</p>
                </div>

                <div id="shsat-score-breakdown" class="score-breakdown" style="display: none;">
                    <div class="shsat-score-total">
                        Total SHSAT Score: <span id="shsat-total-score">0</span>
                    </div>
                    <div class="shsat-score-sections">
                        <div class="shsat-score-section">
                            <strong>Math:</strong> <span id="shsat-math-score">0</span>
                        </div>
                        <div class="shsat-score-section">
                            <strong>English:</strong> <span id="shsat-english-score">0</span>
                        </div>
                    </div>
                </div>

                <div id="sat-score-breakdown" class="score-breakdown" style="display: none;">
                    <div class="sat-score-total">
                        Total SAT Score: <span id="sat-total-score">0</span>
                    </div>
                    <div class="sat-score-sections">
                        <div class="sat-score-section">
                            <strong>Math:</strong> <span id="sat-math-score">0</span>
                        </div>
                        <div class="sat-score-section">
                            <strong>Reading & Writing:</strong> <span id="sat-rw-score">0</span>
                        </div>
                    </div>
                </div>

                <div class="score-summary">
                    <div class="score-main">
                        <div class="score-circle">
                            <span class="score-percentage" id="final-score">85%</span>
                        </div>
                        <div class="score-details">
                            <div class="score-item">
                                <span class="label">Correct Answers:</span>
                                <span class="value" id="correct-count">17/20</span>
                            </div>
                            <div class="score-item">
                                <span class="label">Time Taken:</span>
                                <span class="value" id="time-taken">25:30</span>
                            </div>
                            <div class="score-item">
                                <!-- <span class="label">Section:</span> -->
                                <!-- <span class="value" id="section-name">English Language Arts</span> -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="results-actions">
                    <!-- <button id="review-answers" class="btn btn-outline">Review Answers</button> -->
                    <button id="retake-test" class="btn btn-primary">Take Another Test</button>
                    <button id="back-to-dashboard" class="btn btn-secondary">Back to Dashboard</button>
                </div>

                <div class="performance-breakdown">
                    <h3>Performance Breakdown</h3>
                    <div class="topic-scores" id="topic-scores">
                        <!-- Topic-wise scores will be loaded here -->
                    </div>
                </div>

                <div class="detailed-review-section">
                    <h3>Question Review</h3>
                    <div class="detailed-review" id="detailed-review">
                        <!-- Detailed question review will be loaded here -->
                    </div>
                </div>

                <div class="results-summary">
                    <div class="summary-item">
                        <span class="summary-label">Correct Answers</span>
                        <span class="summary-value" id="correct-answers">17/20</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Time Taken</span>
                        <span class="summary-value" id="time-taken">25:30</span>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Test Code Modal -->
    <div id="test-code-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Enter Test Code</h2>
            <p>Please enter the 3-digit code to start the test.</p>
            <input type="text" id="test-code-input" class="test-code-input" maxlength="3" placeholder="_ _ _">
            <button id="submit-test-code" class="btn btn-primary">Start Test</button>
            <p id="test-code-error" class="error-message" style="display: none;"></p>
        </div>
    </div>

    <script src="/js/dashboard-script.js" type="module"></script>
</body>
</html> 
