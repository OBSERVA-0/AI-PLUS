const readingWritingConversion = {
    0: 200, 1: 200, 2: 200, 3: 200, 4: 200, 5: 200, 6: 200, 7: 200, 8: 210, 9: 220, 10: 230,
    11: 240, 12: 250, 13: 260, 14: 280, 15: 290, 16: 320, 17: 340, 18: 350, 19: 360, 20: 370,
    21: 370, 22: 380, 23: 390, 24: 400, 25: 410, 26: 420, 27: 420, 28: 430, 29: 440, 30: 450,
    31: 460, 32: 460, 33: 470, 34: 480, 35: 490, 36: 490, 37: 500, 38: 510, 39: 520, 40: 530,
    41: 540, 42: 540, 43: 550, 44: 560, 45: 570, 46: 580, 47: 590, 48: 590, 49: 600, 50: 610,
    51: 620, 52: 630, 53: 630, 54: 640, 55: 650, 56: 660, 57: 670, 58: 680, 59: 690, 60: 700,
    61: 710, 62: 720, 63: 730, 64: 750, 65: 770, 66: 800
};

const mathConversion = {
    0: 200, 1: 200, 2: 200, 3: 200, 4: 200, 5: 200, 6: 200, 7: 210, 8: 230, 9: 250, 10: 280,
    11: 310, 12: 320, 13: 330, 14: 340, 15: 350, 16: 360, 17: 360, 18: 370, 19: 380, 20: 390,
    21: 400, 22: 400, 23: 410, 24: 420, 25: 430, 26: 450, 27: 460, 28: 470, 29: 490, 30: 500,
    31: 510, 32: 530, 33: 540, 34: 550, 35: 560, 36: 580, 37: 590, 38: 600, 39: 610, 40: 620,
    41: 630, 42: 650, 43: 660, 44: 680, 45: 700, 46: 720, 47: 740, 48: 760, 49: 770, 50: 780,
    51: 790, 52: 800, 53: 800, 54: 800
};

const convertSatRawToScaled = (rawScore, section) => {
    const table = section === 'math' ? mathConversion : readingWritingConversion;
    const maxScore = section === 'math' ? 54 : 66;
    if (rawScore < 0) return 200;
    if (rawScore > maxScore) return 800;
    return table[rawScore] || 200;
};

module.exports = {
    convertSatRawToScaled
};